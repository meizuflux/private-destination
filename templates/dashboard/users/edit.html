{% extends 'dashboard/users/layout.html' %}

{% block title %}
    Editing user {{id}}
{% endblock title %}

{% block main2 %}
    {% if error %}
        <article class="message is-warning">
            <div class="message-header">
                <p>{{error["title"]}}</p>
            </div>
            <div class="message-body">
                {{error["message"]}}
            </div>
        </article>
    {% else %}
        <form method="POST" novalidate>
            <div class="field">
                <label class="label">User ID</label>
                <input class="input" type="text" value="{{id}}" disabled>
            </div>

            <div class="field">
                <label class="label">Joined</label>
                <input class="input" type="text" value="{{joined.strftime('%d %B %Y at %H:%M')}}" disabled>
            </div>

            <div class="field">
                <label class="label">Username</label>
                <input class="input" type="text" value="{{username}}" name="username">
                {% if username_error %}
                    <p class="help is-danger">{{username_error[0]}}</p>
                {% endif %}
            </div>

            <div class="field">
                <label class="label">Email</label>
                <input class="input" type="email" value="{{email}}" name="email">
                {% if email_error %}
                    <p class="help is-danger">{{email_error[0]}}</p>
                {% endif %}
            </div>

            <div class="field">
                <label class="label">Authorized</label>
                <label class="radio" {% if is_self == True %}disabled{% endif%}>
                    <input type="radio" name="authorized" value="True" {% if authorized == True %}checked{% endif%} {% if is_self == True %}disabled{% endif%}>
                    True
                </label>
                <label class="radio" {% if is_self == True %}disabled{% endif%}>
                    <input type="radio" name="authorized" value="False" {% if authorized != True %}checked{% endif%} {% if is_self == True %}disabled{% endif%}>
                    False
                </label>
            </div>
            
            <div class="field">
                <div class="buttons">
                    <button class="button is-info" type="submit">Save</button>
                    {% if not is_self %}
                        <a href="/dashboard/users/{{id}}/delete" class="button is-danger">Delete</a>
                    {% endif %}
                </div>
            </div>
        </form>
    {% endif %}
{% endblock %}